<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>

   <script src="script.js"></script>
   <link rel="stylesheet" href="style.css">

</head>

<body>
   <div class="overlay">
      <div class="container">
         <div class="content" id="content">
            <div class="row">

               <img src="" class="image-container" id="image">

               <script>
                  let currentImage;
                  const imageElement = document.getElementById('image')

                  function updateRandomImage() {
                     let newImage;

                     do {
                        newImage = Math.floor(Math.random() * 4) + 1;
                     } while (newImage === currentImage);

                     currentImage = newImage;

                     const imageElement = document.getElementById('image');
                     imageElement.src = `images/${currentImage}.png`;
                     imageElement.classList.add('glitch');

                     setTimeout(() => {
                        imageElement.classList.remove('glitch');
                     }, 600);
                  }

                  setInterval(updateRandomImage, 8000);

                  currentImage = Math.floor(Math.random() * 4) + 1;
                  updateRandomImage();
               </script>
               <div class="welcome">
                  <p>
                     Hello, I'm Serena. Nice to Meet you! <br>
                     こんにちは、セレナです。 はじめまして！
                  </p>
                  <br>
                  <p>
                     Please see the <span class="events" onclick="openModal()">rules</span> for more <span
                        class="events" onclick="openModal()">information</span>. <br>
                     <span class="events" onclick="openModal()">詳しく</span>は<span class="events"
                        onclick="openModal()">ルール</span>をご覧ください<br>
                     — — — — — — — — — — — — — — — — — —
                  </p>
               </div>
            </div>
            <h2 class="name">セレナ - Serena</h2>
            <div class="answer">
               <span id="english" class="answerEN"></span>
               <br>
               <div id="loadingAnimation"></div>
               <span id="japanese" class="answerJP"></span>
            </div>

            <script>
               const english = document.getElementById('english')
               const japanese = document.getElementById('japanese')

               const randomEN = [
                  "you have finally arrived. i hope your question is up to my precious time.",
                  "ah, hello curious. What do you want to know now? not that I care much...",
                  "oh, an intruder in my kingdom of sarcasm. what else do you have to challenge me today?"
               ]

               const randomJP = [
                  "ついに到着しましたね。 私の貴重な時間を使ってあなたの質問が終わることを願っています",
                  "ああ、こんにちは、好奇心旺盛です。 今知りたいことは何ですか? あまり気にしているわけではないのですが…",
                  "ああ、私の皮肉の王国への侵入者だ。 今日は他に何か私に挑戦しなければならないことがありますか？"
               ]

               let randomSentence = Math.floor(Math.random() * 3)

               english.innerHTML = randomEN[randomSentence]
               japanese.innerHTML = randomJP[randomSentence]

            </script>

            <span style="color: #FFF; font-size:2.0em; margin-right: -10px;"> >> </span>
            <form class="question" id="question">
               <input class="custom-input" type="text" placeholder="type something..." id="inputField" />
            </form>

            <script>
               document.getElementById('question').addEventListener('submit', (e) => {
                  let japanese = document.getElementById('japanese')
                  let english = document.getElementById('english')

                  japanese.innerHTML = ''
                  english.innerHTML = ''
                  e.preventDefault()
                  const inputField = document.getElementById("inputField")

                  startLoadingAnimation()
                  fetchData(inputField.value);

                  inputField.value = "";
               })
            </script>

         </div>
         <!-- Modal -->
         <div class="modal" id="modal">
            <pre id="ascii" class="ascii">
       _____ _   _ ______ ____             _   _ _____    _____  _    _ _      ______  _____ 
      |_   _| \ | |  ____/ __ \      /\   | \ | |  __ \  |  __ \| |  | | |    |  ____|/ ____|
        | | |  \| | |__ | |  | |    /  \  |  \| | |  | | | |__) | |  | | |    | |__  | (___  
        | | | . ` |  __|| |  | |   / /\ \ | . ` | |  | | |  _  /| |  | | |    |  __|  \___ \ 
       _| |_| |\  | |   | |__| |  / ____ \| |\  | |__| | | | \ \| |__| | |____| |____ ____) |
      |_____|_| \_|_|    \____/  /_/    \_\_| \_|_____/  |_|  \_\\____/|______|______|_____/                                                                                                                                                                                                  
            </pre>

            <ol class="rules" id="rulesEN" style="display:none">
               <li>To change the language, click here: <span class="events" onclick="toggleLanguage()"> >> BR << </span>
               </li>
               <li>The model was created using <a href="http://huggingface.co/openai-community/gpt2-medium"
                     target="_blank"> GPT-2
                     Medium </a> with fine-tuning.</li>
               <li>The bot's name is Serena. She has a tsundere personality (sarcastic and cold).</li>
               <li>Ask Serena everyday things, for example:
                  <ul>
                     <li>"How are you?"</li>
                     <li>"What is the meaning of life?"</li>
                     <li>"How is the weather?"</li>
                  </ul>
               </li>
               <li>Serena only knows <span class="events">English</span>; you can try other languages, but she will
                  ignore them.</li>
               <li>For some reason of destiny, Serena doesn't say 'Hi', 'Hello', 'Hey', etc. I guess that's just her
                  thing, who knows.</li>
               <li>Sometimes she can be quite arrogant, but that's normal for her.</li>
               <li>Created by: <a href="http://github.com/rodrigodalfre" target="_blank">Rodrigo Dalfré Tesser</a></li>
               <li>To exit, just type <span class="events">'sair'</span> or <span class="events">'exit'</span></li>
            </ol>

            <ol class="rules" id="rulesBR" style="display:none;">
               <li>Para mudar a linguagem clique aqui:<span class="events" onclick="toggleLanguage()"> >> EN << </span>
               </li>
               <li>O modelo foi criado utilizando <a href="http://huggingface.co/openai-community/gpt2-medium"
                     target="_blank"> GPT-2
                     Medium </a>com fine-tuned.</li>
               <li>O nome do bot é Serena. Ela possui uma personalidade tsundere (sarcastica e fria).</li>
               <li>Pergunte a Serena coisas do cotidiano, exemplos:
                  <ul>
                     <li>"Como você está?"</li>
                     <li>"Qual o significado da vida?"</li>
                     <li>"Como está o tempo?"</li>
                  </ul>
               </li>
               <li>Serena apenas sabe <span class="events">inglês</span>; você pode tentar outras línguas, mas ela vai
                  ignorar.</li>
               <li>Por algum motivo do destino, Serena não diz 'Oi', 'Olá', 'Hey' e etc. Acho que isso é algo dela, sei
                  lá.</li>
               <li>Às vezes ela pode ser bastante arrogante, mas é normal dela.</li>
               <li>Criado por: <a href="http://github.com/rodrigodalfre" target="_blank"> Rodrigo Dalfré Tesser</a></li>
               <li>Para sair daqui basta digitar <span class="events">'sair'</span> ou <span
                     class="events">'exit'</span></li>
            </ol>

            <script>
               function toggleLanguage() {

                  const rulesEN = document.getElementById('rulesEN');
                  const rulesBR = document.getElementById('rulesBR');
                  const modal = document.getElementById('modal');

                  // Oculta o modal durante a troca de idioma
                  modal.style.display = 'none';

                  if (rulesEN.style.display === 'none') {
                     rulesEN.style.display = 'block';
                     rulesBR.style.display = 'none';
                  } else {
                     rulesEN.style.display = 'none';
                     rulesBR.style.display = 'block';
                  }

                  setTimeout(() => {
                     modal.classList.remove('scan-animation');
                     void modal.offsetWidth; // Trigger reflow
                     modal.classList.add('scan-animation');

                     modal.style.display = 'block';
                  }, 10);
               }
            </script>
            <!-- Botão para fechar o modal -->
            <div style="margin-top: 10px; display: none;" id="formInput">
               <span style="
                  color: #FFF; 
                  font-size:2.0em; 
                  margin-right: -10px;
               "> >> </span>
               <span class="question">
                  <form id="exitForm" style="display: none;">
                     <input type="text" type="text" placeholder="type something..." id="exitInput"
                        style="display: none;" />
                  </form>
               </span>
            </div>

            <script>
               document.getElementById("exitForm").addEventListener("submit", function (event) {
                  event.preventDefault();

                  const exitValue = document.getElementById("exitInput").value;

                  if (exitValue.toLowerCase() === 'exit' || exitValue.toLowerCase() === 'sair') {
                     closeModal()
                  }
                  document.getElementById("exitInput").value = "";
               });

            </script>

         </div>

         <script>
            const exitForm = document.getElementById("exitForm")
            const rulesBR = document.getElementById('rulesBR');
            const rulesEN = document.getElementById('rulesEN');
            const overlay = document.getElementById('content');
            const modal = document.getElementById('modal')
            const ascii = document.getElementById('ascii')
            const exitInput = document.getElementById("exitInput")
            const formInput = document.getElementById('formInput')

            function openModal() {
               overlay.style.animation = 'scan 5s ease-out forwards'
               modal.style.animation = 'scan 5s ease-out forwards'
               overlay.style.display = 'none';
               ascii.style.display = 'block'
               modal.style.display = 'block'
               rulesBR.style.display = 'block';
               exitForm.style.display = 'block';
               exitInput.style.display = 'block';
               formInput.style.display = 'block'
            }

            function closeModal() {
               modal.style.animation = 'none'
               overlay.style.display = 'block';
               ascii.style.display = 'none'
               rulesBR.style.display = 'none';
               rulesEN.style.display = 'none';
               exitForm.style.display = 'none'
               exitInput.style.display = 'none';
               formInput.style.display = 'none'
            }
         </script>
      </div>
   </div>
   </div>

</body>

</html>